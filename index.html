<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Career Progression Points Calculator (Teacher II–VII ES & JHS)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for Inter font and rounded corners, if not fully covered by Tailwind */
        body {
            font-family: "Inter", sans-serif;
        }
        /* Ensure inputs and selects have rounded corners as per general instructions */
        input[type="number"], select {
            border-radius: 0.375rem; /* Tailwind's rounded-md */
            box-sizing: border-box; /* Ensure padding is included in element's total width/height */
        }
        /* Specific table styling not easily done with Tailwind classes directly on elements */
        table {
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid #e5e7eb; /* Tailwind's border-gray-300 */
            /* Increased vertical padding for table cells */
            padding: 1rem 0.5rem; /* More generous padding: py-4 px-2 */
            vertical-align: middle; /* Ensure content is vertically centered */
        }
        /* Adjust padding for the input/select elements themselves to be consistent */
        input[type="number"], select {
            padding: 0.5rem; /* Equivalent to Tailwind's py-2 px-2 */
            line-height: 1.5; /* Ensure consistent line height */
            /* Ensure they fill the cell, overriding potential default smaller width */
            width: 100%; 
            height: 2.5rem; /* Explicitly set a consistent height for inputs and selects */
            vertical-align: middle; /* Center content vertically within the input/select */
        }
        /* Custom radio button styling to match Tailwind aesthetics */
        .form-radio {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            display: inline-block;
            width: 1rem;
            height: 1rem;
            border-radius: 50%;
            border: 2px solid #d1d5db; /* gray-300 */
            background-color: #fff;
            vertical-align: middle;
            transition: all 0.2s ease-in-out;
            cursor: pointer;
        }
        .form-radio:checked {
            border-color: transparent;
            background-color: currentColor; /* Uses the text color of the parent (e.g., text-blue-600) */
            background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3ccircle cx='8' cy='8' r='3'/%3e%3c/svg%3e");
            background-size: 100% 100%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .form-radio:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.5); /* blue-500 with opacity */
        }
    </style>
</head>
<body class="bg-gray-100 flex flex-col items-center p-4 min-h-screen">
    <div id="calculatorContainer" class="w-full max-w-md bg-white p-6 rounded-lg shadow-xl mb-6 box-border">
        <h1 class="text-2xl font-bold text-gray-800 text-center mb-4">Career Progression Points Calculator <br>(Teacher II–VII ES & JHS)</h1>
        
        <div class="mb-4 text-left px-1 box-border">
            <label for="positionApplied" class="block text-gray-700 font-semibold mb-1">Position Applying for:</label>
            <select id="positionApplied" class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-base">
                <option value="">-- Select Position --</option>
                <option value="Teacher II">Teacher II</option>
                <option value="Teacher III">Teacher III</option>
                <option value="Teacher IV">Teacher IV</option>
                <option value="Teacher V">Teacher V</option>
                <option value="Teacher VI">Teacher VI</option>
                <option value="Teacher VII">Teacher VII</option>
            </select>
            <div id="positionInstruction" class="text-red-600 text-sm mt-1 pl-1 hidden">Select a position first</div>
        </div>

        <div id="qualificationAssessmentContainer" class="w-full bg-white p-6 rounded-lg shadow-inner mb-6 box-border">
            <h2 class="text-xl font-bold text-gray-800 text-center mb-4">Qualification Assessment</h2>

            <div class="mb-3">
                <p class="text-gray-700 mb-2">1. Do you have a Bachelor's degree in Education, or a Bachelor's degree in a relevant subject or learning area with at least 18 professional units in Education?</p>
                <div class="flex items-center space-x-4">
                    <label class="inline-flex items-center">
                        <input type="radio" name="q1" value="yes" class="form-radio text-blue-600" disabled>
                        <span class="ml-2 text-gray-700">Yes</span>
                    </label>
                    <label class="inline-flex items-center">
                        <input type="radio" name="q1" value="no" class="form-radio text-red-600" disabled>
                        <span class="ml-2 text-gray-700">No</span>
                    </label>
                </div>
            </div>

            <div class="mb-3">
                <p class="text-gray-700 mb-2">2. Do you have at least the required number of training hours in any of or a cumulative of the following: Curriculum, Pedagogy, Subject Specialization acquired within the last 5 years?</p>
                <ul class="list-disc list-inside text-gray-600 text-sm ml-4 mb-2">
                    <li>8 hours (if applying for T2)</li>
                    <li>16 hours (if applying for T3-4)</li>
                    <li>24 hours (if applying for T5-6)</li>
                    <li>32 hours (if applying for T7)</li>
                </ul>
                <div class="flex items-center space-x-4">
                    <label class="inline-flex items-center">
                        <input type="radio" name="q2" value="yes" class="form-radio text-blue-600" disabled>
                        <span class="ml-2 text-gray-700">Yes</span>
                    </label>
                    <label class="inline-flex items-center">
                        <input type="radio" name="q2" value="no" class="form-radio text-red-600" disabled>
                        <span class="ml-2 text-gray-700">No</span>
                    </label>
                </div>
            </div>

            <div class="mb-3">
                <p class="text-gray-700 mb-2">3. Do you have at least the required teaching experience?</p>
                <ul class="list-disc list-inside text-gray-600 text-sm ml-4 mb-2">
                    <li>1 year (if applying for T2)</li>
                    <li>2 years (if applying for T3)</li>
                    <li>3 years (if applying for T4-5)</li>
                    <li>4 years (if applying for T5-6)</li>
                </ul>
                <div class="flex items-center space-x-4">
                    <label class="inline-flex items-center">
                        <input type="radio" name="q3" value="yes" class="form-radio text-blue-600" disabled>
                        <span class="ml-2 text-gray-700">Yes</span>
                    </label>
                    <label class="inline-flex items-center">
                        <input type="radio" name="q3" value="no" class="form-radio text-red-600" disabled>
                        <span class="ml-2 text-gray-700">No</span>
                    </label>
                </div>
            </div>

            <div class="mb-3">
                <p class="text-gray-700 mb-2">4. Are you a RA 1080 Eligibility holder?</p>
                <div class="flex items-center space-x-4">
                    <label class="inline-flex items-center">
                        <input type="radio" name="q4" value="yes" class="form-radio text-blue-600" disabled>
                        <span class="ml-2 text-gray-700">Yes</span>
                    </label>
                    <label class="inline-flex items-center">
                        <input type="radio" name="q4" value="no" class="form-radio text-red-600" disabled>
                        <span class="ml-2 text-gray-700">No</span>
                    </label>
                </div>
            </div>

            <div class="mb-3">
                <p class="text-gray-700 mb-2">5. Do you have at least the required Proficient COIs and NCOIs?</p>
                <ul class="list-disc list-inside text-gray-600 text-sm ml-4 mb-2">
                    <li>at least 6 proficient COIs at Very Satisfactory; and at least 4 Proficient NCOIs at Very Satisfactory (if applying for T2)</li>
                    <li>at least 12 proficient COIs at Very Satisfactory; and at least 8 Proficient NCOIs at Very Satisfactory (if applying for T3)</li>
                    <li>21 proficient COIs at Very Satisfactory; and at 16 Proficient NCOIs at Very Satisfactory (if applying for T4)</li>
                    <li>at least 6 proficient COIs at Outstanding; and at least 4 Proficient NCOIs at Outstanding (if applying for T5)</li>
                    <li>at least 12 proficient COIs at Outstanding; and at least 4 Proficient NCOIs at Very Satisfactory and 4 proficient NCOIs at Outstanding (if applying for T6)</li>
                    <li>at least 18 proficient COIs at Outstanding; and at least 6 Proficient NCOIs at Very Satisfactory and 6 proficient NCOIs at Outstanding (if applying for T7)</li>
                </ul>
                <div class="flex items-center space-x-4">
                    <label class="inline-flex items-center">
                        <input type="radio" name="q5" value="yes" class="form-radio text-blue-600" disabled>
                        <span class="ml-2 text-gray-700">Yes</span>
                    </label>
                    <label class="inline-flex items-center">
                        <input type="radio" name="q5" value="no" class="form-radio text-red-600" disabled>
                        <span class="ml-2 text-gray-700">No</span>
                    </label>
                </div>
            </div>

            <div class="mt-6 text-center">
                <p class="text-lg font-bold text-gray-800">Remark: <span id="qualificationRemark" class="text-blue-600">--</span></p>
            </div>
        </div>

        <table class="w-full bg-white rounded-lg overflow-hidden">
            <thead>
                <tr>
                    <th class="p-2 bg-gray-200 text-gray-700 text-center text-sm w-1/4">CRITERIA</th>
                    <th class="p-2 bg-gray-200 text-gray-700 text-center text-sm w-1/2">CREDENTIAL DETAILS</th>
                    <th class="p-2 bg-gray-200 text-gray-700 text-center text-sm whitespace-nowrap w-1/4">POINTS</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="p-2 text-sm">Education</td>
                    <td class="p-2">
                        <select id="education" disabled class="w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm">
                            <option value="-1">-- Select --</option>
                            <option value="0">No units in Master's Degree</option>
                            <option value="1">1 unit in Master's Degree</option>
                            <option value="2">2 units in Master's Degree</option>
                            <option value="3">3 units in Master's Degree</option>
                            <option value="4">4 units in Master's Degree</option>
                            <option value="5">5 units in Master's Degree</option>
                            <option value="6">6 units in Master's Degree</option>
                            <option value="7">7 units in Master's Degree</option>
                            <option value="8">8 units in Master's Degree</option>
                            <option value="9">9 units in Master's Degree</option>
                            <option value="10">10 units in Master's Degree</option>
                            <option value="11">11 units in Master's Degree</option>
                            <option value="12">12 units in Master's Degree</option>
                            <option value="13">13 units in Master's Degree</option>
                            <option value="14">14 units in Master's Degree</option>
                            <option value="15">15 units in Master's Degree</option>
                            <option value="16">16 units in Master's Degree</option>
                            <option value="17">17 units in Master's Degree</option>
                            <option value="18">18 units in Master's Degree</option>
                            <option value="19">19 units in Master's Degree</option>
                            <option value="20">20 units in Master's Degree</option>
                            <option value="21">21 units in Master's Degree</option>
                            <option value="22">22 units in Master's Degree</option>
                            <option value="23">23 units in Master's Degree</option>
                            <option value="24">24 units in Master's Degree</option>
                            <option value="25">25 units in Master's Degree</option>
                            <option value="26">26 units in Master's Degree</option>
                            <option value="27">27 units in Master's Degree</option>
                            <option value="28">28 units in Master's Degree</option>
                            <option value="29">29 units in Master's Degree</option>
                            <option value="30">30 units in Master's Degree</option>
                            <option value="31">31 units in Master's Degree</option>
                            <option value="32">32 units in Master's Degree</option>
                            <option value="33">33 units in Master's Degree</option>
                            <option value="34">34 units in Master's Degree</option>
                            <option value="35">35 units in Master's Degree</option>
                            <option value="36">36 units in Master's Degree</option>
                            <option value="37">37 units in Master's Degree</option>
                            <option value="38">38 units in Master's Degree</option>
                            <option value="39">39 units in Master's Degree</option>
                            <option value="40">40 units in Master's Degree</option>
                            <option value="41">41 units in Master's Degree</option>
                            <option value="42">42 units in Master's Degree</option>
                            <option value="43">More than 42 Units in Master's Degree</option>
                            <option value="44">CAR towards Master's Degree</option>
                            <option value="45">Master's Degree Holder</option>
                            <option value="46">1 Unit in Doctorate Degree</option>
                            <option value="47">2 Units in Doctorate Degree</option>
                            <option value="48">3 Units in Doctorate Degree</option>
                            <option value="49">4 Units in Doctorate Degree</option>
                            <option value="50">5 Units in Doctorate Degree</option>
                            <option value="51">6 Units in Doctorate Degree</option>
                            <option value="52">7 Units in Doctorate Degree</option>
                            <option value="53">8 Units in Doctorate Degree</option>
                            <option value="54">9 Units in Doctorate Degree</option>
                            <option value="55">10 Units in Doctorate Degree</option>
                            <option value="56">11 Units in Doctorate Degree</option>
                            <option value="57">12 Units in Doctorate Degree</option>
                            <option value="58">13 Units in Doctorate Degree</option>
                            <option value="59">14 Units in Doctorate Degree</option>
                            <option value="60">15 Units in Doctorate Degree</option>
                            <option value="61">16 Units in Doctorate Degree</option>
                            <option value="62">17 Units in Doctorate Degree</option>
                            <option value="63">18 Units in Doctorate Degree</option>
                            <option value="64">19 Units in Doctorate Degree</option>
                            <option value="65">20 Units in Doctorate Degree</option>
                            <option value="66">21 Units in Doctorate Degree</option>
                            <option value="67">22 Units in Doctorate Degree</option>
                            <option value="68">23 Units in Doctorate Degree</option>
                            <option value="69">24 Units in Doctorate Degree</option>
                            <option value="70">More than 24 Units in Doctorate Degree</option>
                            <option value="71">CAR towards Doctorate Degree</option>
                            <option value="72">Doctorate Degree Holder</option>
                        </select>
                    </td>
                    <td class="p-2 text-center text-sm whitespace-nowrap"><span id="eduPoints">0</span> /10</td>
                </tr>
                <tr>
                    <td class="p-2 text-sm">Training</td>
                    <td class="p-2">
                        <input type="number" id="training" min="0" placeholder="Total hours of training" disabled class="w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm">
                    </td>
                    <td class="p-2 text-center text-sm whitespace-nowrap"><span id="trainPoints">0</span> /10</td>
                </tr>
                <tr>
                    <td class="p-2 text-sm">Experience</td>
                    <td class="p-2">
                        <input type="number" id="experience" min="0" placeholder="Total months of experience" disabled class="w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm">
                    </td>
                    <td class="p-2 text-center text-sm whitespace-nowrap"><span id="expPoints">0</span> /10</td>
                </tr>
                <tr>
                    <td class="p-2 text-sm">Performance</td>
                    <td class="p-2">
                        <input type="number" id="performance" min="0" max="5" step="0.01" placeholder="Final rating (SY 24-25 IPCRF)" disabled class="w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm">
                    </td>
                    <td class="p-2 text-center text-sm whitespace-nowrap"><span id="perfPoints">0</span> /30</td>
                </tr>
                <tr>
                    <td class="p-2 text-sm whitespace-nowrap">PPST COIs</td>
                    <td class="p-2">
                        <span class="text-gray-500 italic text-sm">To be rated after demo</span>
                    </td>
                    <td class="p-2 text-center text-sm whitespace-nowrap"><span id="coisPoints">0</span> /25</td>
                </tr>
                <tr>
                    <td class="p-2 text-sm whitespace-nowrap">PPST NCOIs</td>
                    <td class="p-2">
                        <span class="text-gray-500 italic text-sm">To be validated through MOVs</span>
                    </td>
                    <td class="p-2 text-center text-sm whitespace-nowrap"><span id="ncoisPoints">0</span> /15</td>
                </tr>
                <tr>
                    <th colspan="2" class="p-2 bg-gray-200 text-gray-700 text-left text-base font-bold">PARTIAL POINTS EARNED</th>
                    <th class="p-2 bg-gray-200 text-gray-700 text-center text-base font-bold whitespace-nowrap"><span id="totalPoints">0</span></th>
                </tr>
            </tbody>
        </table>
        <div id="disclaimerText" class="text-gray-600 text-xs mt-4 text-left px-1">
            Disclaimer: This calculator is an unofficial tool and is not provided or endorsed by the Department of Education (DepEd). It is intended solely to assist applicants in estimating their points based on existing guidelines. For official evaluation and results, please refer to your respective HR or division office.
        </div>
    </div>

    <div class="buttons-container w-full max-w-md flex flex-col gap-3">
        <button id="resetButton" class="w-full py-3 px-4 bg-blue-600 text-white font-semibold rounded-md shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-300 ease-in-out">
            Reset Fields
        </button>
    </div>

    <script>
        // Subtraction values based on position applied
        const subtractionValues = {
            "Teacher II": { education: 6, training: 2, experience: 3 },
            "Teacher III": { education: 6, training: 3, experience: 5 },
            "Teacher IV": { education: 6, training: 3, experience: 7 },
            "Teacher V": { education: 6, training: 4, experience: 7 },
            "Teacher VI": { education: 6, training: 4, experience: 9 },
            "Teacher VII": { education: 6, training: 5, experience: 9 }
        };

        // Education points lookup
        // This array maps the selected option value (index) to a corresponding "level" before subtraction.
        // The actual points (0-10) are derived from this level minus the position's required subtraction.
        const educationPointsLookup = [
            6, 6, 6, 6, 6, 6, 7, 7, 7, 8, 8, 8, 9, 9, 9, 10, 10, 10, 11, 11, 11, 12, 12, 12, 13, 13, 13, 14, 14, 14, 15, 15, 15, 16, 16, 16, 17, 17, 17, 18, 18, 18, 19, 19, 20,
            21, 21, 21, 22, 22, 22, 23, 23, 23, 24, 24, 24, 25, 25, 25, 26, 26, 26, 27, 27, 27, 28, 28, 28, 29, 29, 30, 31
        ];

        // Generic function to map calculated increments to final points (0-10)
        // This function ensures the points awarded for Education, Training, and Experience
        // are capped at 10 and follow a specific increment rule.
        const getPointsFromIncrementTable = (increments) => {
            if (increments >= 10) return 10;
            if (increments >= 8) return 8;
            if (increments >= 6) return 6;
            if (increments >= 4) return 4;
            if (increments >= 2) return 2;
            return 0;
        };

        // Calculates Education points based on selected units/degree and position's subtraction.
        const getEducationPoints = (eduIndex, eduSubtract) => {
            // If no option selected or invalid index, return 0 points.
            if (eduIndex === -1 || isNaN(eduIndex) || eduIndex >= educationPointsLookup.length) {
                return 0;
            }
            // Get the corresponding "level" from the lookup table.
            const correspondingLevel = educationPointsLookup[eduIndex];
            // Calculate increments by subtracting the position's requirement.
            const increments = correspondingLevel - eduSubtract;
            // Return the final points using the generic increment table.
            return getPointsFromIncrementTable(increments);
        };

        // Training hours to level lookup
        // This array maps total training hours (index) to a corresponding "level".
        const trainingLevels = [
            1, 1, 1, 1, 1, 1, 1, 1, // 0-7 hours -> level 1
            2, 2, 2, 2, 2, 2, 2, 2, // 8-15 hours -> level 2
            3, 3, 3, 3, 3, 3, 3, 3, // 16-23 hours -> level 3
            4, 4, 4, 4, 4, 4, 4, 4, // 24-31 hours -> level 4
            5, 5, 5, 5, 5, 5, 5, 5, // 32-39 hours -> level 5
            6, 6, 6, 6, 6, 6, 6, 6, // 40-47 hours -> level 6
            7, 7, 7, 7, 7, 7, 7, 7, // 48-55 hours -> level 7
            8, 8, 8, 8, 8, 8, 8, 8, // 56-63 hours -> level 8
            8, // 64 hours -> level 8 (as per provided list, if this is a typo and should be 9, adjust)
            9, 9, 9, 9, 9, 9, 9, // 65-71 hours -> level 9
            10, 10, 10, 10, 10, 10, 10, 10, // 72-79 hours -> level 10
            11, 11, 11, 11, 11, 11, 11, 11, // 80-87 hours -> level 11
            12, 12, 12, 12, 12, 12, 12, 12, // 88-95 hours -> level 12
            13, 13, 13, 13, 13, 13, 13, 13, // 96-103 hours -> level 13
            14, 14, 14, 14, 14, 14, 14, 14, // 104-111 hours -> level 14
            15, 15, 15, 15, 15, 15, 15, 15, // 112-119 hours -> level 15
            16, 16, 16, 16, 16, 16, 16, 16, // 120-127 hours -> level 16
            17, 17, 17, 17, 17, 17, 17, 17, // 128-135 hours -> level 17
            18, 18, 18, 18, 18, 18, 18, 18, // 136-143 hours -> level 18
            19, 19, 19, 19, 19, 19, 19, 19, // 144-151 hours -> level 19
            20, 20, 20, 20, 20, 20, 20, 20, // 152-159 hours -> level 20
            21, 21, 21, 21, 21, 21, 21, 21, // 160-167 hours -> level 21
            22, 22, 22, 22, 22, 22, 22, 22, // 168-175 hours -> level 22
            23, 23, 23, 23, 23, 23, 23, 23, // 176-183 hours -> level 23
            24, 24, 24, 24, 24, 24, 24, 24, // 184-191 hours -> level 24
            25, 25, 25, 25, 25, 25, 25, 25, // 192-199 hours -> level 25
            26, 26, 26, 26, 26, 26, 26, 26, // 200-207 hours -> level 26
            27, 27, 27, 27, 27, 27, 27, 27, // 208-215 hours -> level 27
            28, 28, 28, 28, 28, 28, 28, 28, // 216-223 hours -> level 28
            29, 29, 29, 29, 29, 29, 29, 29, // 224-231 hours -> level 29
            30, 30, 30, 30, 30, 30, 30, 30, // 232-239 hours -> level 30
            31 // 240 hours or more -> level 31 (for any hours >= 240, it will cap at level 31)
        ];

        // Calculates Training points based on total hours and position's subtraction.
        const getTrainingPoints = (hours, trainSubtract) => {
            let selectedLevel = 0;
            // If hours exceed the lookup table length, use the maximum level.
            if (hours >= trainingLevels.length) {
                selectedLevel = trainingLevels[trainingLevels.length - 1];
            } else if (hours >= 0) {
                // Otherwise, use the direct mapping from hours to level.
                selectedLevel = trainingLevels[hours];
            }
            // Calculate increments and return final points.
            const increments = selectedLevel - trainSubtract;
            return getPointsFromIncrementTable(increments);
        };

        // Experience months to level lookup
        // This array maps total experience months (index) to a corresponding "level".
        const experienceLevels = [
            0, 0, 0, 0, 0, // Months 0-4 (assuming 0 points for less than 5 months as per previous behavior)
            1, // 5 months
            2, 2, 2, 2, 2, 2, // 6-11 months
            3, 3, 3, 3, 3, 3, // 12-17 months
            4, 4, 4, 4, 4, 4, // 18-23 months
            5, 5, 5, 5, 5, 5, // 24-29 months
            6, 6, 6, 6, 6, 6, // 30-35 months
            7, 7, 7, 7, 7, 7, // 36-41 months
            8, 8, 8, 8, 8, 8, // 42-47 months
            9, 9, 9, 9, 9, 9, // 48-53 months
            10, 10, 10, 10, 10, 10, // 54-59 months
            11, 11, 11, 11, 11, 11, // 60-65 months
            12, 12, 12, 12, 12, 12, // 66-71 months
            13, 13, 13, 13, 13, 13, // 72-77 months
            14, 14, 14, 14, 14, 14, // 78-83 months
            15, 15, 15, 15, 15, 15, // 84-89 months
            16, 16, 16, 16, 16, 16, // 90-95 months
            17, 17, 17, 17, 17, 17, // 96-101 months
            18, 18, 18, 18, 18, 18, // 102-107 months
            19, 19, 19, 19, 19, 19, // 108-113 months
            20, 20, 20, 20, 20, 20, // 114-119 months
            21, 21, 21, 21, 21, 21, // 120-125 months
            22, 22, 22, 22, 22, 22, // 126-131 months
            23, 23, 23, 23, 23, 23, // 132-137 months
            24, 24, 24, 24, 24, 24, // 138-143 months
            25, 25, 25, 25, 25, 25, // 144-149 months
            26, 26, 26, 26, 26, 26, // 150-155 months
            27, 27, 27, 27, 27, 27, // 156-161 months
            28, 28, 28, 28, 28, 28, // 162-167 months
            29, 29, 29, 29, 29, 29, // 168-173 months
            30, 30, 30, 30, 30, 30, // 174-179 months
            31, 31 // 180 months or more -> level 31 (for any months >= 180, it will cap at level 31)
        ];

        // Calculates Experience points based on total months and position's subtraction.
        const getExperiencePoints = (months, expSubtract) => {
            let selectedLevel = 0;
            // Handle months less than 5 explicitly as per your provided list start.
            if (months < 5) {
                selectedLevel = 0;
            } else if (months >= experienceLevels.length + 5 - 1) { // Adjusted to correctly index beyond 180 months
                selectedLevel = experienceLevels[experienceLevels.length - 1];
            } else if (months >= 0) {
                selectedLevel = experienceLevels[months]; // Direct mapping based on index (assuming index starts from 0 for 0 months)
            }
            // Calculate increments and return final points.
            const increments = selectedLevel - expSubtract;
            return getPointsFromIncrementTable(increments);
        };

        // Get references to all input fields that need to be toggled
        const togglableInputs = [
            document.getElementById('education'),
            document.getElementById('training'),
            document.getElementById('experience'),
            document.getElementById('performance'),
            // Add new radio buttons to the list of togglable inputs
            ...document.querySelectorAll('input[name="q1"]'),
            ...document.querySelectorAll('input[name="q2"]'),
            ...document.querySelectorAll('input[name="q3"]'),
            ...document.querySelectorAll('input[name="q4"]'),
            ...document.querySelectorAll('input[name="q5"]')
        ];

        // Function to enable or disable input fields
        const toggleInputFields = (enable) => {
            togglableInputs.forEach(input => {
                if (enable) {
                    input.removeAttribute('disabled'); // Explicitly remove disabled attribute
                } else {
                    input.setAttribute('disabled', 'true'); // Explicitly add disabled attribute
                    // Reset values when disabling to prevent stale data from affecting calculations
                    if (input.tagName === 'SELECT') {
                        input.value = "-1"; // For select elements, reset to default "-- Select --"
                    } else if (input.type === 'radio') {
                        input.checked = false; // Uncheck radio buttons
                    } else {
                        input.value = ""; // For number inputs, clear the value
                    }
                }
            });
            updatePoints(); // Recalculate points after toggling
            checkQualification(); // Also update qualification remark
        };

        // Main function to update all calculated points and total
        const updatePoints = () => {
            const positionApplied = document.getElementById('positionApplied').value;
            const positionInstruction = document.getElementById('positionInstruction');
            let eduSubtract = 0;
            let trainSubtract = 0;
            let expSubtract = 0;

            // Show/hide instruction message based on position selection
            if (!positionApplied) {
                positionInstruction.classList.remove('hidden'); // Show the message
                // If no position is selected, ensure all points are 0
                document.getElementById('eduPoints').textContent = 0;
                document.getElementById('trainPoints').textContent = 0;
                document.getElementById('expPoints').textContent = 0;
                document.getElementById('perfPoints').textContent = (0).toFixed(2);
                document.getElementById('coisPoints').textContent = 0; // COIs now contribute 0
                document.getElementById('ncoisPoints').textContent = 0; // NCOIs now contribute 0
                document.getElementById('totalPoints').textContent = (0).toFixed(2);
                return; // Stop the function here
            } else {
                positionInstruction.classList.add('hidden'); // Hide the message
            }

            // Set subtraction values based on selected position
            if (subtractionValues[positionApplied]) {
                eduSubtract = subtractionValues[positionApplied].education;
                trainSubtract = subtractionValues[positionApplied].training;
                expSubtract = subtractionValues[positionApplied].experience;
            }

            // Parse input values, defaulting to 0 if empty or invalid
            const eduIndex = parseInt(document.getElementById('education').value);
            const trainHours = parseInt(document.getElementById('training').value) || 0;
            const expMonths = parseInt(document.getElementById('experience').value) || 0;
            const performanceInput = parseFloat(document.getElementById('performance').value) || 0;
            // cois and ncois are no longer inputs, so their points are 0 for partial points earned
            const cois = 0;
            const ncois = 0;

            // Calculate points for each criterion
            const calculatedEduPoints = getEducationPoints(eduIndex, eduSubtract);
            const trainPoints = getTrainingPoints(trainHours, trainSubtract);
            const expPoints = getExperiencePoints(expMonths, expSubtract);

            // Performance calculation: (input value / max rating) * max points
            const perfPoints = (performanceInput / 5) * 30;
            // Ensure performance points do not exceed the max possible (30)
            const finalPerfPoints = Math.min(perfPoints, 30);

            const coisPoints = cois;
            const ncoisPoints = ncois;

            // Update the display for each criterion's points
            document.getElementById('eduPoints').textContent = calculatedEduPoints;
            document.getElementById('trainPoints').textContent = trainPoints;
            document.getElementById('expPoints').textContent = expPoints;
            document.getElementById('perfPoints').textContent = finalPerfPoints.toFixed(2); /* Show 2 decimal places for performance */
            document.getElementById('coisPoints').textContent = coisPoints;
            document.getElementById('ncoisPoints').textContent = ncoisPoints;

            // Calculate and display the total points
            const total = calculatedEduPoints + trainPoints + expPoints + finalPerfPoints + coisPoints + ncoisPoints;
            document.getElementById('totalPoints').textContent = total.toFixed(2); /* Show 2 decimal places for total */
        };

        // Function to check qualification based on radio button answers
        const checkQualification = () => {
            const positionApplied = document.getElementById('positionApplied').value;
            const remarkElement = document.getElementById('qualificationRemark');

            // If no position is selected, display "--" and return
            if (!positionApplied) {
                remarkElement.textContent = "--";
                remarkElement.classList.remove('text-green-600', 'text-red-600');
                remarkElement.classList.add('text-blue-600');
                return;
            }

            // Get answers for each question
            const q1Answer = document.querySelector('input[name="q1"]:checked')?.value;
            const q2Answer = document.querySelector('input[name="q2"]:checked')?.value;
            const q3Answer = document.querySelector('input[name="q3"]:checked')?.value;
            const q4Answer = document.querySelector('input[name="q4"]:checked')?.value;
            const q5Answer = document.querySelector('input[name="q5"]:checked')?.value;

            // Check if all questions are answered. If not, set remark to "--" and exit.
            if (!q1Answer || !q2Answer || !q3Answer || !q4Answer || !q5Answer) {
                remarkElement.textContent = "--";
                remarkElement.classList.remove('text-green-600', 'text-red-600');
                remarkElement.classList.add('text-blue-600');
                return;
            }

            // Determine qualification: all must be 'yes'
            let allAnsweredYes = (q1Answer === 'yes' &&
                                  q2Answer === 'yes' &&
                                  q3Answer === 'yes' &&
                                  q4Answer === 'yes' &&
                                  q5Answer === 'yes');

            // Update the remark text and color based on qualification status
            if (allAnsweredYes) {
                remarkElement.textContent = "Qualified";
                remarkElement.classList.remove('text-red-600', 'text-blue-600');
                remarkElement.classList.add('text-green-600');
            } else {
                remarkElement.textContent = "Not Qualified";
                remarkElement.classList.remove('text-green-600', 'text-blue-600');
                remarkElement.classList.add('text-red-600');
            }
        };

        // Attach event listeners to all relevant input and select elements for real-time updates
        document.querySelectorAll('input, select').forEach(input => {
            // Exclude the positionApplied dropdown itself from this general listener,
            // as it has its own specific change listener.
            // Also exclude the new descriptive spans for COIs/NCOIs as they are not inputs.
            if (input.id !== 'positionApplied' && input.type !== 'radio') {
                input.addEventListener('input', updatePoints);
                input.addEventListener('change', updatePoints);
            }
        });

        // Add event listeners for the new radio buttons to trigger qualification check
        document.querySelectorAll('input[type="radio"]').forEach(radio => {
            radio.addEventListener('change', () => {
                checkQualification(); // Only check qualification for radio button changes
            });
        });

        // Specific event listener for the positionApplied dropdown
        document.getElementById('positionApplied').addEventListener('change', (event) => {
            const selectedPosition = event.target.value;
            if (selectedPosition === "") {
                toggleInputFields(false); // Disable if "-- Select Position --" is chosen
            } else {
                toggleInputFields(true); // Enable if a valid position is chosen
            }
            updatePoints(); // Always update points after position change
            checkQualification(); // Also update qualification remark after position change
        });

        // Reset button functionality: Clears all inputs and resets the calculator state.
        document.getElementById('resetButton').addEventListener('click', () => {
            document.getElementById('positionApplied').value = ""; // Reset position dropdown
            toggleInputFields(false); // Disable all other fields and reset their values
            updatePoints(); // Recalculate and update total (will be 0)
            checkQualification(); // Reset qualification remark
        });

        // Initial setup on page load: Disable inputs and show instruction.
        window.onload = function() {
            toggleInputFields(false); // Disable all inputs initially
            updatePoints(); // Set initial total to 0 and show instruction
            checkQualification(); // Initial check for qualification remark
        };
    </script>
</body>
</html>
